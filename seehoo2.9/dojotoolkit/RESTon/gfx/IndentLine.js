define(["dojo/_base/declare"],function(t){return t(null,{constructor:function(t){this.surface=t;this.shape={}},_getStroke:function(){return{color:"green",width:6,style:"solid",cap:"round"}},_show:function(){var t=this.shape;if(!t.line)return;var o={x1:t.line.fromX,y1:t.line.fromY,x2:t.line.toX,y2:t.line.toY};if(this.line)this.line.setShape(o);else{this.line=this.surface.createLine(o).setStroke(this._getStroke()).moveToBack();this.line.data=this;this.line.on("click",function(t){t.gfxTarget.data.onClick(t)});this.line.on("dblclick",function(t){t.gfxTarget.data.onDblclick(t)})}},_compute:function(){var t=this.shape;if(!t.from)return;if(!t.to)return;if(!t.line)t.line={};var o=t.line;o.fromRadian=Math.atan((t.to.y-t.from.y)/(t.to.x-t.from.x));if(t.from.x>t.to.x)o.fromRadian+=Math.PI;o.fromAngle=o.fromRadian*180/Math.PI;o.toRadian=o.fromRadian+Math.PI;o.toAngle=360-o.fromAngle;o.fromX=t.from.x+Math.cos(o.fromRadian)*t.from.r;o.fromY=t.from.y+Math.sin(o.fromRadian)*t.from.r;o.toX=t.to.x+Math.cos(o.toRadian)*t.to.r;o.toY=t.to.y+Math.sin(o.toRadian)*t.to.r},paint:function(){this._compute();this._show()},from:function(t,o,i){if(i==undefined)i=0;var n=this.shape;if(!n.from)n.from={};n.from.x=t;n.from.y=o;n.from.r=i;this.paint()},to:function(t,o,i){if(i==undefined)i=0;var n=this.shape;if(!n.to)n.to={};n.to.x=t;n.to.y=o;n.to.r=i;this.paint()},setStroke:function(t){this.line.setStroke(t)},onClick:function(t){}})});